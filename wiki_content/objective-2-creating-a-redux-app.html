<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Objective 2 - Creating a Redux App</title>
<meta name="identifier" content="gc97afdf495af161d98e94d1375a5ab04"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>
<div class=" border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
    <h3><strong>Overview</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
    <p>In order to use Redux in a React project, you will install two NPM packages: <a class="inline_disabled" href="https://www.npmjs.com/package/@reduxjs/toolkit" target="_blank">Redux Toolkit</a> and <a class="inline_disabled" href="https://www.npmjs.com/package/react-redux" target="_blank">React Redux</a>. You may also bootstrap a React app that already includes these dependencies by running <code>npx @bloomtools/react my-first-redux-app</code> in your terminal.</p>
    <p>In this Objective, you will learn to get Redux up and running in your application. The state will be very simple: Redux will be tracking the state of a counter. But once you have a little bit of state working, it's very easy to add some more.</p>
    <p>Configuring Redux will involve four different aspects:</p>
    <ol style="list-style-type: decimal;">
        <li><strong>Creating a slice of application state</strong>, and defining the state changing functions.</li>
        <li><strong>Building a Redux store</strong>, which is the place where all slices are combined.</li>
        <li><strong>Wrapping the component tree</strong> with a Provider, which uses Context to "teleport" application state to any component.</li>
        <li><strong>Displaying and updating state</strong>&nbsp;from any component in the tree.</li>
    </ol>
    <p>Let's get into it!</p>
</div>
<div class="border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
    <h3><strong>How to Build It</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
    <h4><strong>1- Create a Slice of Application State</strong></h4>
    <p>In the project's front-end folder, a new folder called 'state' and a file 'slice.js' are created. This file holds a part of the application state, with potential for multiple slices in more complex applications.<span> The slice is defined using the 'createSlice' function from Redux Toolkit. It includes a name ('count_state'), an initial state object (e.g., </span><code>{ count: 0 }</code><span>), and reducers with methods like 'increment' to update the state. The 'slice.reducer' and actions like 'increment' are exported for use in components, allowing for state changes when actions are emitted:</span></p>
    <pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.555556px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// frontend/state/slice.js</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { createSlice } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'@reduxjs/toolkit'</span><br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> slice = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">createSlice</span>({<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">name</span>: <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'count_state'</span>,<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">initialState</span>: { <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">count</span>: <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">0</span> }, <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// we can add many more properties besides 'count'</span><br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">reducers</span>: {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">increment</span>(<span>state</span>) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// this is like a branch in the switches you wrote in The Reducer Pattern</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">return</span> { ...state, <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">count</span>: state.<span>count</span> + <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">1</span> }<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;}<br>})<br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">default</span> slice.<span>reducer</span> <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// there can be other reducers in the app besides this one</span><br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> { increment } = slice.<span>actions</span> <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// components will use these functions</span></code></pre>
    <p>Redux Toolkit includes a library called <a class="inline_disabled" href="https://immerjs.github.io/immer/" target="_blank">Immer</a> which allows <span>you to write seemingly mutable logic in your reducers, which is then translated into immutable updates under the hood. For example, it allows you to rewrite your 'increment' function like this:</span></p>
    <pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.555556px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">increment</span>(<span>state</span>) {<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// thanks to the magic of Immer:</span><br>&nbsp;&nbsp;state.<span>count</span>++ <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// mutate freely, and don't return!</span><br>},</code></pre>
    <p>Redux Toolkit addresses in this way the concerns of many developers regarding the verbosity of 'classic' reducers, without actually changing the way reducers work under the hood.</p>
  <p>&nbsp;</p>  
  <h4><strong>2- Build a Redux Store</strong><strong></strong></h4>
    <p>A single store for the entire application state is created in 'store.js'. It is configured with the 'configureStore' function from Redux Toolkit, incorporating the created slice(s):</p>
    <pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.666667px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// frontend/state/store.js</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { configureStore } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'@reduxjs/toolkit'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> reducer <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'./slice'</span><br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> store = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">configureStore</span>({<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">reducer</span>: {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">counters</span>: reducer,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// other reducers would go here</span><br>&nbsp;&nbsp;}<br>})<br></code></pre>
    <p>In this way, Redux combines all the slices of state in the application into one big reducer.</p>
  <p>&nbsp;</p>  
  <h4><strong>3- Wrap the Component Tree with a Provider</strong></h4>
    <p>The React application is wrapped with a Provider from React Redux, which is provided with the created store to enable state access across all components:</p>
    <pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.666667px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// frontend/index.js</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">React</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'react'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { createRoot } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'react-dom/client'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">App</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'./components/App'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">Provider</span> } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'react-redux'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { store } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'./state/store'</span><br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> root = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">createRoot</span>(<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">document</span>.<span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">getElementById</span>(<span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'root'</span>))<br><br>root.<span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">render</span>(<br>&nbsp;&nbsp;<span><span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">Provider</span> <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">store</span>=<span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">{store}</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">App</span> /&gt;</span><br>&nbsp;&nbsp;<span>&lt;/<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">Provider</span>&gt;</span></span><br>)</code></pre>
    <p>Redux is using the Context API under the hood, to 'teleport' props to any component in the tree, no matter how deeply nested. You only need to do this step once per application. You can wrap the whole app like you see here, or just a part of the component tree.</p>
  <p>&nbsp;</p>  
  <h4><strong>4- Display and Update State in Components</strong></h4>
    <p>Components, like the App component, use the 'useSelector' and 'useDispatch' hooks from React Redux to access and update state. 'useSelector' retrieves specific state data (e.g., the count), and 'useDispatch' allows dispatching actions like increment:</p>
    <pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.555556px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// frontend/components/App.js</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">React</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'react'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> {<br>&nbsp;&nbsp;useSelector, <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// allows to select pieces of state</span><br>&nbsp;&nbsp;useDispatch, <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// allows to dispatch actions to the reducers</span><br>} <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'react-redux'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { increment } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'../state/slice'</span> <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// the action</span><br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">default</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">function</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">App</span>() {<br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> count = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">useSelector</span>(<span><span>st</span> =&gt;</span> st.<span>counters</span>.<span>count</span>)<br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> dispatch = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">useDispatch</span>()<br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">return</span> (<br>&nbsp;&nbsp;&nbsp;&nbsp;<span><span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">div</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">button</span> <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">onClick</span>=<span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">{()</span> =&gt;</span> {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const action = increment()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dispatch(action) // the reducer will detect this action<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}&gt;The count is {count}<span>&lt;/<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">button</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;/<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">div</span>&gt;</span></span><br>&nbsp;&nbsp;)<br>}</code></pre>
    <p>If you install the Redux Dev Tools extension for Chrome, you should be able to see the state of your app and the actions dispatched, when you click the increment button!</p>
    <p><img src="$IMS-CC-FILEBASE$/Uploaded%20Media/redux-devtools.png" alt="Redux Developer Tools" data-api-endpoint="https://bloomtech.instructure.com/api/v1/courses/2204/files/746760" data-api-returntype="File" loading="lazy"></p>
</div>
<div class="border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
    <h3><strong>Video Walkthrough</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
    <p><iframe class="wistia_embed" title="Creating a Redux App" src="https://fast.wistia.net/embed/iframe/252fu4dvhj?seo=false&amp;videoFoam=false" width="640" height="360" name="wistia_embed" allow="autoplay; fullscreen" loading="lazy"></iframe></p>
</div>
</body>
</html>