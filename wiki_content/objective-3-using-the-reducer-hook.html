<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Objective 3 - Using the Reducer Hook</title>
<meta name="identifier" content="g8285a27e6dc8509db0223dbe364ca484"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>
<div class=" border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
<h3><strong>Overview</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
<p>The Reducer hook is an alternative to the State hook. It is preferable when you have complex logic that you have to deal with in a component, or when you find yourself with a lot of state properties in a single component. <code>useReducer</code>, takes in a <code>reducer</code> function (which we build), as well as a value for the <code>initialState</code>. Then it returns both the current state and a dispatch function that allows to modify state, similar to what the State hook does:</p>
<pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.666667px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> [state, dispatch] = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">useReducer</span>(reducer, initialState)</code></pre>
</div>
<p><span>The <code>dispatch</code> function is a significant addition to our arsenal here. It will send an action to our reducer when specific events occur in our application. The dispatch allows us to leverage the reducer function from our previous section to maintain our state at the level of the component.</span></p>
<p>The <code>useReducer</code> hook has all the functionality we love from the <code>useState</code> hook and combines it with the power of the reducers we are building ourselves. In doing so, it provides access to both the state and a function that dispatch actions to our reducer.</p>
<div class="border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
<h3><strong>How to Build It</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
<p><span>Let's build out a component to go along with our counter reducer. Please pay attention to the comments in the code that will walk us through this process:</span></p>
<pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.666667px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">React</span>, { useReducer } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'react'</span> <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// import the hook</span><br><br><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// decide what the initial state looks like</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> initialState = { <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">count</span>: <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">0</span>, <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">/* other slices of state */</span> }<br><br><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// build a reducer</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">function</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">reducer</span>(<span>state, action</span>) {<br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">switch</span> (action.<span>type</span>) {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">case</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'INCREASE'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">return</span> { ...state, <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">count</span>: state.<span>count</span> + <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">1</span> }<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">case</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'DECREASE'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">return</span> { ...state, <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">count</span>: state.<span>count</span> - <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">1</span> }<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// likely there will be many other cases</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">default</span>: <span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// do not forget your default case</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">return</span> state<br>&nbsp;&nbsp;}<br>}<br><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">default</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">function</span> <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">Counter</span>() {<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// use the hook at the top of the component,</span><br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// passing it the reducer and the initial state</span><br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> [state, dispatch] = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">useReducer</span>(reducer, initialState)<br><br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">return</span> (<br>&nbsp;&nbsp;&nbsp;&nbsp;<span><span>&lt;&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{/* `state` holds all the slices of state, like `count` */}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">div</span> <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">className</span>=<span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">"count"</span>&gt;</span>Count: {state.count}<span>&lt;/<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">div</span>&gt;</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{/* `dispatch` alerts the reducer that the state must be recalculated */}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">button</span> <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">onClick</span>=<span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">{()</span> =&gt;</span> dispatch({ type: 'INCREASE' })}&gt;+1<span>&lt;/<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">button</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">button</span> <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">onClick</span>=<span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">{()</span> =&gt;</span> dispatch({ type: 'DECREASE' })}&gt;-1<span>&lt;/<span style="border: 0px none #22863a; color: #22863a; text-decoration: none solid #22863a;">button</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;/&gt;</span></span><br>&nbsp;&nbsp;)<br>}</code></pre>
<p>The Reducer hook might be overkill in a component with such simple state, but it's a lifesaver when things start getting complicated. The reducer function may be put in a separate file, for easier maintenance, and to keep the component it powers a bit neater.</p>
</div>
<div class="border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
<h3><strong>Video Walkthrough</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
<p><iframe class="wistia_embed" title="the reducer hook" src="https://fast.wistia.net/embed/iframe/10677f03r3?seo=false&amp;videoFoam=false" width="640" height="360" name="wistia_embed" allow="autoplay; fullscreen" loading="lazy"></iframe></p>
</div>
</body>
</html>