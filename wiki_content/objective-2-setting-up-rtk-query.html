<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Objective 2 - Setting Up RTK Query</title>
<meta name="identifier" content="g6f8929d71248d7dfc01f69a159ca3304"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>
<div class=" border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
<h3><strong>Overview</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
<p>This objective is dedicated to mastering the setup of RTK Query within a React application. RTK Query is a powerful data fetching and caching tool provided by the Redux Toolkit, which simplifies server-state management in modern applications. Our objective is to construct an API slice to handle user data requests and seamlessly integrate this service into our Redux store, paving the way for efficient data management.</p>
</div>
<div class="border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
<h3><strong>How to Build It</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
<h4><strong>Setting Up the API Service</strong></h4>
<p>Our journey begins with the establishment of an API slice. The <code>createApi</code> function from RTK Query is a factory that generates an object containing a set of tools designed for data fetching. We'll configure our slice with a <code>reducerPath</code> that uniquely identifies the slice within our store and initiate our <code>baseQuery</code> with the root URL of our backend API.</p>
<pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.555556px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// frontend/state/usersApi.js</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { createApi, fetchBaseQuery } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'@reduxjs/toolkit/query/react'</span><br><br><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// The usersApi slice - handling API interactions for user data</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> usersApi = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">createApi</span>({<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Unique key that defines where the data will be stored in the Redux state</span><br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">reducerPath</span>: <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'usersApi'</span>,<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Setting up the base query with the base URL pointing to the backend service</span><br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">baseQuery</span>: <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">fetchBaseQuery</span>({ <span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">baseUrl</span>: <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'http://localhost:9009/api/'</span> }),<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Placeholder for our endpoint definitions - to be implemented</span><br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">endpoints</span>: <span><span>builder</span> =&gt;</span> ({<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Endpoints will be defined here in future steps</span><br>&nbsp;&nbsp;})<br>})</code><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><br></code></pre>
<h4><strong>Integrating the API Service with the Store</strong></h4>
<p><span>Now, let's weave our </span><code>usersApi</code><span> into the fabric of our Redux store configuration. We incorporate our API slice's reducer into the store's root reducer. Additionally, we infuse the store's middleware chain with the API slice's middleware to ensure that it can intercept and handle any relevant actions.</span></p>
<pre style="background: none 0% 0% / auto repeat scroll padding-box border-box #ffffff; border: 0.555556px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font: 12px / 14.4px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none solid #24292e; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;" data-hljs-language="javascript"><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// frontend/state/store.js</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { configureStore } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'@reduxjs/toolkit'</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">import</span> { usersApi } <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62; text-decoration: none solid #032f62;">'./usersApi'</span><br><br><span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Configuring the Redux store, adding in our API slice and middleware</span><br><span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49; text-decoration: none solid #d73a49;">const</span> store = <span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">configureStore</span>({<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// The root reducer object where we mount our slice reducers</span><br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">reducer</span>: {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Other reducers might exist</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Mounting the API reducer under a dynamic key generated by the API slice</span><br>&nbsp;&nbsp;&nbsp;&nbsp;[usersApi.<span>reducerPath</span>]: usersApi.<span>reducer</span>,<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Customizing the store's middleware chain</span><br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5; text-decoration: none solid #005cc5;">middleware</span>: <span><span>getDefaultMiddleware</span> =&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6a737d; color: #6a737d; text-decoration: none solid #6a737d;">// Adding the API middleware to the default middleware chain</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">getDefaultMiddleware</span>().<span style="border: 0px none #6f42c1; color: #6f42c1; text-decoration: none solid #6f42c1;">concat</span>(usersApi.<span>middleware</span>),<br>})</code><code style="background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); border: 0px none #24292e; font: 16px / 19.2px Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px;"><br></code></pre>
<h4><strong>RTK Query in Action</strong></h4>
<p><span>With our </span><code>usersApi</code><span> slice and store configuration in place, the stage is set for us to define specific endpoints. These endpoints are akin to doorways that our components will use to send and receive data, carrying out actions such as fetching user lists, creating new users, or updating existing user information.</span></p>
<h4><strong>Observing the Behavior</strong></h4>
<p><span>With RTK Query operational, we can turn our attention to the Redux DevTools to check the states that are set up for us.</span></p>
<p>&nbsp;</p>
</div>
<div class="border border-trbl" style="background-color: #00808c; color: #ffffff; padding: 2px 10px; border: 1px solid black;">
<h3><strong>Video Walkthrough</strong></h3>
</div>
<div class="content-box pad-box-mini border border-rbl">
<p><iframe class="wistia_embed" title="Understanding Redux" src="https://fast.wistia.net/embed/iframe/sw6iebwxba?seo=false&amp;videoFoam=false" width="640" height="360" name="wistia_embed" allow="autoplay; fullscreen" loading="lazy"></iframe></p>
</div>
</body>
</html>