<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Objective 3 - [SUPPLEMENTAL] use the connect function to connect React components to the Redux store</title>
<meta name="identifier" content="g52d3faa121e0b8480bd22bc77120996a"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>
<p><iframe class="wistia_embed" title="Connecting React Components to the Redux Store Video" src="https://fast.wistia.net/embed/iframe/ww80mo0di2" width="640" height="360" name="wistia_embed" allow="autoplay; fullscreen" loading="lazy"></iframe></p>
<h2 id="overview">Overview</h2>
<p>Now that we have built a store to manage our state, we need to connect our components to that store. We can do so using the <code>connect</code> function, within the components themselves. We can also build a helper function within the component files to tell the <code>connect</code> function what pieces of state we want to access. This function is usually named <code>mapStateToProps</code>, and it will map pieces of our Redux state to the props of our component. Let's try it out.</p>
<h2 id="follow-along">Follow Along</h2>
<p>Using the app you created earlier that has the redux store wired up, change the object you initially returned out of the reducer function to look like this:</p>
<pre style="background-image: none;  background-attachment: scroll;   background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal;   font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;      background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none;  background-attachment: scroll;   background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal;   font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;">{<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">user</span>: {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">name</span>: <span style="border: 0px none #032f62; color: #032f62;">'Dustin'</span><br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">movies</span>: [<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #032f62; color: #032f62;">'Star Wars'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #032f62; color: #032f62;">'Lord of the Rings'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #032f62; color: #032f62;">'Harry Potter'</span><br>&nbsp;&nbsp;],<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">todoList</span>: [<br>&nbsp;&nbsp;&nbsp;&nbsp;{ <span style="border: 0px none #005cc5; color: #005cc5;">task</span>: <span style="border: 0px none #032f62; color: #032f62;">'Learn Redux'</span>, <span style="border: 0px none #005cc5; color: #005cc5;">id</span>: <span style="border: 0px none #005cc5; color: #005cc5;">0</span>, <span style="border: 0px none #005cc5; color: #005cc5;">completed</span>: <span style="border: 0px none #005cc5; color: #005cc5;">false</span> }<br>&nbsp;&nbsp;],<br>&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">moviesToWatch</span>: <span style="border: 0px none #005cc5; color: #005cc5;">13</span><br>}</code></pre>
<p>Now create a component called <code>MovieList</code>. Next, we'll take a look at the syntax we use to connect our React component to Redux, then we'll talk about it. To start, import the <code>connect</code> function into your component:</p>
<pre style="background-image: none;  background-attachment: scroll;   background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal;   font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;      background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none;  background-attachment: scroll;   background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal;   font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">import</span> { connect } <span style="border: 0px none #d73a49; color: #d73a49;">from</span> <span style="border: 0px none #032f62; color: #032f62;">'react-redux'</span>;</code></pre>
<p>Next, we use the <code>connect</code> function, where we export the component at the bottom of the file. We invoke <code>connect</code> twice (function currying). First with two arguments - a function and an object. Second with just the component we are trying to connect. For now, we'll pass <code>null</code> and <code>{}</code> into the first invocation.</p>
<pre style="background-image: none;  background-attachment: scroll;   background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal;   font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;      background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none;  background-attachment: scroll;   background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal;   font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #6a737d; color: #6a737d;">// export default MovieList; Not this way if we are connecting this component!</span><br><span style="border: 0px none #d73a49; color: #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49;">default</span> <span style="border: 0px none #6f42c1; color: #6f42c1;">connect</span>(<span style="border: 0px none #005cc5; color: #005cc5;">null</span>, {})(<span style="border: 0px none #6f42c1; color: #6f42c1;">MovieList</span>)</code></pre>
<p>Now <code>MovieList</code> is connected to the store. Let's write our <code>mapStateToProps</code> function now, to tell <code>connect</code> which pieces of our state we want to bring in to this component. This function takes in <code>state</code> as a parameter, then returns an object where the properties can be passed to props, and the values are retrieved from the store for our component.</p>
<p>For a <code>MovieList</code> component, we probably only want to know about the <code>movies</code> array and the <code>moviesToWatch</code> number, <em>maybe</em> the <code>user</code> object. We'll not worry about the <code>todoList</code>, since our component doesn't need to know about that part of our state. Let's bring those three pieces of our state into the component.</p>
<pre style="background-image: none;  background-attachment: scroll;   background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal;   font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;      background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none;  background-attachment: scroll;   background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal;   font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">const</span> <span style="border: 0px none #6f42c1; color: #6f42c1;">mapStateToProps</span> = state =&gt; {<br>&nbsp;&nbsp;<span style="border: 0px none #d73a49; color: #d73a49;">return</span> {<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">movies</span>: state.<span>movies</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">moviesToWatch</span>: state.<span>moviesToWatch</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="border: 0px none #005cc5; color: #005cc5;">user</span>: state.<span>user</span><br>&nbsp;&nbsp;}<br>}</code></pre>
<p>Let's pass this in as the first argument to the first <code>connect</code> invocation. Notice that <code>state</code> is being passed into this function. Under the hood, connect passes our entire state tree to <code>mapStateToProps</code>. That means that within that function, we have access to all our state via the <code>state</code> argument. But, the component only receives the pieces of state that we turn out of <code>mapStateToProps</code>.</p>
<pre style="background-image: none;  background-attachment: scroll;   background-color: #ffffff; border: 1px solid #c7cdd1; clear: none; color: #24292e; cursor: auto; direction: ltr; font-style: normal;   font-stretch: normal; font-size: 12px; line-height: 14.4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px 0px 12px; padding: 9px; text-align: start; text-decoration: none; text-indent: 0px; white-space: pre-wrap; border-collapse: separate; border-spacing: 0px;      background-position: 0% 0%; background-repeat: repeat repeat;" data-hljs-language="javascript"><code style="background-image: none;  background-attachment: scroll;   background-color: rgba(0, 0, 0, 0); border: 0px none #24292e; font-style: normal;   font-stretch: normal; font-size: 16px; line-height: 19.200001px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; margin: 0px; padding: 0px; background-position: 0% 0%; background-repeat: repeat repeat;"><span style="border: 0px none #d73a49; color: #d73a49;">export</span> <span style="border: 0px none #d73a49; color: #d73a49;">default</span> <span style="border: 0px none #6f42c1; color: #6f42c1;">connect</span>(mapStateToProps, {})(<span style="border: 0px none #6f42c1; color: #6f42c1;">MovieList</span>)</code></pre>
<p>Now, if you look at the props in the React tools, you will see that all three pieces of our state have been passed to our component through the <code>connect</code> function! As a side note, other props we've passed to this component the traditional way are still going to be available.</p>
<p><em>By the way, did you notice that we are using a function that takes in a component, extends its functionality, and returns a component? <code>connect</code> is a HOC!!!`</em></p>
<h2 id="challenge">Challenge</h2>
<p>Create a new application. Add the <code>redux</code> and <code>react-redux</code> packages. Create a redux store with some test data (have fun with this part!). Build a component and connect that component to the store using <code>connect</code> and a <code>mapStateToProps</code> function. Render the connected data from your connected component.</p>
</body>
</html>